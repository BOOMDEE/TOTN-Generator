<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>TOTN 生成器</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap');

body {
    font-family: 'Roboto Mono', monospace;
    display: flex;
    justify-content: center;
    padding-top: 50px;
    min-height: 100vh;
    transition: background 0.3s, color 0.3s;
}

.container {
    backdrop-filter: blur(15px);
    padding: 30px 40px;
    border-radius: 20px;
    width: 450px;
    transition: background 0.3s, box-shadow 0.3s;
}

h2 {
    text-align: center;
    margin-bottom: 25px;
    transition: color 0.3s, text-shadow 0.3s;
}

label {
    display: block;
    margin-top: 12px;
    font-size: 14px;
    transition: color 0.3s;
}

select, input, button {
    width: 100%;
    margin-top: 6px;
    padding: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    outline: none;
    transition: background 0.3s, color 0.3s, box-shadow 0.3s;
}

select, input {
    background: rgba(255,255,255,0.1);
    color: inherit;
}

button {
    font-weight: bold;
    cursor: pointer;
    margin-top: 15px;
    transition: all 0.3s ease;
}

button:hover {
    transform: scale(1.05);
}

.output {
    margin-top: 20px;
    font-size: 18px;
    word-break: break-all;
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    letter-spacing: 1px;
    transition: background 0.3s, box-shadow 0.3s;
}

/* 深色主题 */
body.dark {
    background: linear-gradient(135deg,#0f0f1f,#1a1a33);
    color: #fff;
}

body.dark .container {
    background: rgba(255,255,255,0.05);
    box-shadow: 0 0 40px rgba(0,0,0,0.6);
}

body.dark h2 { color: #00e0ff; text-shadow: 0 0 10px #00e0ff; }
body.dark label { color: #a0a0a0; }
body.dark button {
    background: linear-gradient(90deg,#00e0ff,#0066ff);
    color: #fff;
    box-shadow: 0 0 10px rgba(0,224,255,0.5);
}
body.dark .output { background: rgba(0,0,0,0.25); box-shadow: 0 0 10px rgba(0,224,255,0.5); }

/* 浅色主题 */
body.light {
    background: linear-gradient(135deg,#f0f0f0,#dcdcdc);
    color: #111;
}

body.light .container {
    background: rgba(255,255,255,0.85);
    box-shadow: 0 0 25px rgba(0,0,0,0.2);
}

body.light h2 { color: #0066ff; text-shadow: none; }
body.light label { color: #333; }
body.light button {
    background: linear-gradient(90deg,#66ccff,#3399ff);
    color: #fff;
    box-shadow: 0 0 5px rgba(0,102,255,0.3);
}
body.light .output { background: rgba(255,255,255,0.6); box-shadow: 0 0 5px rgba(0,102,255,0.2); }
</style>
</head>
<body class="dark">
<div class="container">
    <h2>TOTN 生成器</h2>

    <button onclick="toggleTheme()">切换深浅色主题</button>

    <label>日期 (YYYYMMDD)</label>
    <input type="text" id="date">

    <label>当日序号</label>
    <select id="seq">
        <option value="01">01</option>
        <option value="02">02</option>
        <option value="03">03</option>
        <option value="04">04</option>
        <option value="05">05</option>
        <option value="06">06</option>
        <option value="07">07</option>
        <option value="08">08</option>
        <option value="09">09</option>
        <option value="10">10</option>
    </select>

    <label>版本号</label>
    <select id="version">
        <option value="01">01</option>
        <option value="02">02</option>
        <option value="03">03</option>
    </select>

    <label>类型码</label>
    <select id="type">
        <option value="01">01 - 签名</option>
        <option value="02">02 - 礼物</option>
        <option value="03">03 - 文件</option>
        <option value="04">04 - 任务</option>
        <option value="05">05 - 冷存储任务</option>
        <option value="06">06 - 批次</option>
        <option value="07">07 - 活动</option>
        <option value="08">08 - 特殊项目</option>
    </select>

    <label>优先级码 (P)</label>
    <select id="priority">
        <option value="0">0 - 不适用</option>
        <option value="1">1 - 低</option>
        <option value="2">2 - 中低</option>
        <option value="3">3 - 中</option>
        <option value="4">4 - 中高</option>
        <option value="5">5 - 高</option>
        <option value="6">6 - 很高</option>
        <option value="7">7 - 紧急</option>
        <option value="8">8 - 超紧急</option>
        <option value="9">9 - 极高</option>
    </select>

    <button onclick="generateTOTN()">生成 TOTN</button>
    <div class="output" id="totnOutput"></div>
    <button onclick="copyTOTN()">复制 TOTN</button>
</div>

<script>
document.getElementById('date').value = new Date().toISOString().slice(0,10).replace(/-/g,'');

function pad2(num){ return num.toString().padStart(2,'0'); }
function sumDigits(str){ return str.split('').reduce((acc,c)=>acc+parseInt(c||0),0); }

function generateTOTN(){
    let dateNum = parseInt(document.getElementById('date').value);
    const fixedCode = 462675;
    const D = dateNum + fixedCode;

    const S = pad2(document.getElementById('seq').value);
    const V = pad2(document.getElementById('version').value);
    const T = pad2(document.getElementById('type').value);
    const P = pad2(document.getElementById('priority').value);

    const C = pad2(sumDigits(S+V+T+P)%100);

    const totn = D.toString() + S + V + T + C + P;
    document.getElementById('totnOutput').textContent = totn;
}

function copyTOTN(){
    const output = document.getElementById('totnOutput');
    navigator.clipboard.writeText(output.textContent).then(()=>alert('已复制 TOTN'));
}

function toggleTheme(){
    document.body.classList.toggle('dark');
    document.body.classList.toggle('light');
}
</script>
</body>
</html>